openapi: 3.0.3
info:
  title: PCINS Payment Gateway API
  description: |
    # PCINS Hosted Payment Interface Service

    ## Overview
    PCINS e-Pay Interface Format1 (PeP1) Message Data Protocol
    This data protocol describes the PCINS API specification.

    ## Index
    1. [Change History](#change-history)
    2. [Abbreviations and symbols](#abbreviations-and-symbols)
    3. [Master Field (Common Parameters)](#common-parameters)
    4. [Credit Card Payment (UI)](#operation/creditCardPaymentAndCertificationUI)
    5. [Credit Certification (UI)](#operation/creditCardPaymentAndCertificationUI)
    6. [External UI Payment (UI)  3D Secure authentication support](#operation/externalUIPayment)
    7. [Direct 3DS Payment (UI)  3D Secure authentication support](#operation/direct3DSPayment)
    8. [QR Payment (UI)](#operation/qrPaymentUI)
    9. [Credit Card Payment (Non-UI)](#operation/directPaymentAPI)
    10. [Speed Payment (Non-UI)](#operation/directPaymentAPI)
    11. [Refund (Non-UI)](#operation/directPaymentAPI)
    12. [Transaction Inquiry (Non-UI)](#operation/directPaymentAPI)
    13. [Payment Result Notification (Non-UI)](#operation/paymentResultNotification)
    14. [ResultCode](#result-codes)

    ## Change History
    <details>
      <summary style='cursor: pointer; cursor: hand;'><strong>v1.0.5</strong></summary>
      <ul>
        <li>Add <code>callbackURL</code> to Credit Card Payment (Non-UI) field</li>
      </ul>
    </details>
    <details>
      <summary style='cursor: pointer; cursor: hand;'><strong>v1.0.4</strong></summary>
      <ul>
        <li>Added an example response when a payment is completed without going through 3DS payment authentication in Direct 3DS Payment (UI)</li>
      </ul>
    </details>
    <details>
      <summary style='cursor: pointer; cursor: hand;'><strong>v1.0.3</strong></summary>
      <ul>
        <li>Added a new payment method. 3DS payments for <strong>VAN22(PCINS HR)</strong> must be made using the corresponding payment method (Direct 3DS Payment).</li>
      </ul>
    </details>
    <details>
      <summary style='cursor: pointer; cursor: hand;'><strong>v1.0.2</strong></summary>
      <ul>
        <li>Add <code>returnURL</code> to external UI payment field</li>
      </ul>
    </details>
    <details>
      <summary style='cursor: pointer; cursor: hand;'><strong>v1.0.1</strong></summary>
      <ul>
        <li>Add <code>callbackURL</code> to external UI payment field</li>
        <li>Change the name of ErrorCode -> ResultCode</li>
        <li>Add Result Code: <strong>200</strong></li>
      </ul>
    </details>
    <details>
      <summary style='cursor: pointer; cursor: hand;'><strong>v1.0.0</strong></summary>
      <ul>
        <li>Added a new payment method. 3DS payments for <strong>VAN36</strong> and <strong>VAN37</strong> must be made using the corresponding payment method (External UI Payment). <em>All future 3D Secure payments will be processed using this payment method.</em></li>
        <li><code>payEmail</code>, <code>payTel</code> fields changed from <strong>O -> M</strong> Input Value (for Credit Card, Credit Certification, QR Payment).</li>
        <li>Add Error Code: <strong>101, 611, 612, 900, 901, 935, 936, 941</strong></li>
      </ul>
    </details>

    ## Abbreviations and Symbols
    | Abbreviation | Definition |
    | --- | --- |
    | `<` | Variable length data that can be entered up to the written value |
    | `a` | Letter or number such as alphabet |
    | `C` | Conditional required (field created if condition is met) |
    | `dp` | Decimal point |
    | `h` | Hexadecimal |
    | `M` | Required (field created) |
    | `n` | Number |
    | `O` | Optional (field created) |
    | `V` | Variable data with no length limit |

    ## Base URLs
    - **Production**: `https://pay.pcins.co.kr/gw`

    ## Authentication (Test Account Environment)
    All API requests require:
    - `merchantId`: M000000187
    - `merchantPwd`: 1234

    ## Data Format Principles
    - **JPY amounts** do not allow decimal points. **USD amounts** allow up to two decimal points.
    - **expireM** (Card valid month): The request format is MM. If 10 or less, always include 0 (01, 02, 03...).
    - **expireY** (Card valid year): The request format is YY. If it is less than 10, it must contain 0 (01, 02, 03...).
    - **payId**: Only letters and numbers are allowed in the data format.
    - **transTime**: The request format is YYYYMMDDHHMMSS.

    ## Common Parameters

    ### Message Stage (erst)
    | Value | Definition |
    | --- | --- |
    | logon | Logon Stage |
    | aures | Confirmation stage |
    | logoff | Logoff Stage |

    ### Transaction Type (tradeGubun)
    | Value | Definition |
    |-------|------------|
    | 1 | Sale (online approval) |
    | 2 | Refund |
    | 7 | Confirmation/Credit Certification |
    | 9 | Transaction inquiry |
    | 11 | Register recurring billing |
    | 12 | Cancel recurring billing |

    ### Currency (currType)
    | Value | Definition |
    |-------|------------|
    | JPY | Japanese Yen |
    | USD | US Dollar |
    | EUR | Euro |
    | KRW | Korean Won |
    | CNY | Chinese Yuan |

    ### Card Type (cardType)
    | Value | Definition |
    |-------|------------|
    | AMX | American Express |
    | JCB | Japanese Credit Bank |
    | MSC | MasterCard |
    | VIS | VISA |

    ### Special CardNo for Speedy Payment
    | Value | Definition |
    |---|---|
    | 88888888888888 | Search for credit card information in merchantId + phone number + payId |
    | 88888888888881 | Search for credit card information in merchantId + phone number |
    | 88888888888882 | Search for credit card information in merchantId + payId |

    ### Language Code & Language (charset, lang)
    | Attribute | Value | Definition |
    |---|---|---|
    | **charset** | UTF-8 | Global |
    |             | SHIFT-JIS | Japanese |
    |             | EUC-KR | Korean |
    | **lang**    | JP | Japanese |
    |             | EN | English |
    |             | CN | Chinese |

    ### Transaction Codes
    | Field | Value | Definition |
    |---|---|---|
    | **transCode** (Status) | AS | Authorization Success |
    |                        | AF | Authorization Failed |
    | **transStaus** (Inquiry) | 1 | Sale |
    |                          | 2 | Refund |

    ### City Code (cityCode) - 3166-2:JP
    | Code | Prefecture | Code | Prefecture | Code | Prefecture |
    |---|---|---|---|---|---|
    | 1 | HOKKAIDO | 17 | ISHIKAWA | 33 | OKAYAMA |
    | 2 | AOMORI | 18 | FUKUI | 34 | HIROSHIMA |
    | 3 | IWATE | 19 | YAMANASHI | 35 | YAMAGUCHI |
    | 4 | MIYAGI | 20 | NAGANO | 36 | TOKUSHIMA |
    | 5 | AKITA | 21 | GIFU | 37 | KAGAWA |
    | 6 | YAMAGATA | 22 | SHIZUOKA | 38 | EHIME |
    | 7 | FUKUSHIMA | 23 | AICHI | 39 | KOCHI |
    | 8 | IBARAKI | 24 | MIE | 40 | FUKUOKA |
    | 9 | TOCHIGI | 25 | SHIGA | 41 | SAGA |
    | 10 | GUNMA | 26 | KYOTO | 42 | NAGASAKI |
    | 11 | SAITAMA | 27 | OSAKA | 43 | KUMAMOTO |
    | 12 | CHIBA | 28 | HYOGO | 44 | OITA |
    | 13 | TOKYO | 29 | NARA | 45 | MIYAZAKI |
    | 14 | KANAGAWA | 30 | WAKAYAMA | 46 | KAGOSHIMA |
    | 15 | NIIGATA | 31 | TOTTORI | 47 | OKINAWA |
    | 16 | TOYAMA | 32 | SHIMANE | | |

    ## Result Codes
    | Code | Definition |
    |------|------------|
    | 000 | Approval Success |
    | 101 | Failed to enter continuous billing information. |
    | 200 | Request Connection |
    | 611 | Your card exceeds the monthly limit. Contact your administrator. |
    | 612 | Your card exceeds the number of times you use it per month. Contact your administrator. |
    | 711 | This card BIN cannot be used. |
    | 712 | Korean card payment is not possible |
    | 713 | Risk card registration card, please try again with another card. |
    | 900 | The message is not long enough. |
    | 901 | Connection Error. |
    | 902 | VAN approval failure |
    | 909 | Payment has already been made. |
    | 910 | This card number is registered to the risk transaction card. Payment is not possible. |
    | 911 | The one-time payment limit has been exceeded. Please contact the administrator. |
    | 912 | The daily payment limit has been exceeded. Please contact the administrator. |
    | 913 | The one-month payment limit has been exceeded. Please contact the administrator. |
    | 914 | The password does not match. |
    | 915 | Merchant Agreement is not Live. |
    | 916 | Requirements not entered* |
    | 917 | Transaction information does not exist. |
    | 918 | Internet access is restricted. Please contact the administrator. |
    | 919 | There is no payment information. |
    | 920 | Exceeded limit |
    | 921 | Insufficient balance |
    | 922 | Incorrect card holder |
    | 923 | Incorrect card number |
    | 924 | Incorrect expiration date |
    | 925 | Incorrect security code |
    | 926 | System error |
    | 927 | Card company approval rejected |
    | 928 | Invalid card type |
    | 929 | Stolen card |
    | 931 | Please contact the card company. |
    | 932 | Please enter the security code (CVV). |
    | 933 | Incorrect card type. |
    | 934 | This card is not eligible for the service. |
    | 935 | Acquirer decline. |
    | 936 | The minimum payment amount has not been met. |
    | 941 | This payment has already been refunded. |
    | 999 | Continuous charging has already been canceled. |

    <details>
    <summary style='cursor: pointer; cursor: hand;'>Detailed Error Messages</summary>

    ### Code 200
    - Request Connection
    - Mail sent successfully

    ### Code 901
    - VAN login failed (VAN login information is incorrect.)
    - Invalid response data (VAN response data is empty or invalid.)

    ### Code 902
    - The set currency and payment currency are different, so please check the merchant settings. (The VAN line supports only one payment currency.)

    ### Code 916
    - Required not input (merchantID) (M000000187 not entered)
    - Required not input (merchantPW) (Merchant PW not entered)
    - Required not input (age) ()
    - Required not input (tradeGubun) (tradeGubun not entered)
    - Required not input (ref) (ref not entered)
    - Required not input (currType) (currType not entered)
    - Required not input (cardType) (cardType not entered)
    - Card are not supported for payment.
    - Required not input (cardNo) (cardNo not entered)
    - Required not input (expireM, expireY) (expireM or expireY not entered)
    - Required not input (payName) (payName not entered)
    - Required not input (payId) (payId not entered)
    - Required not input (payTel) (payTel not entered)
    - Required not input (productName) (productName not entered)
    - Required not input (price) (price not entered)
    - Required not input (transNo) (transNo not entered)
    - Required not input (regularId) (regularId not entered)
    - The email format is invalid.
    - Please contact the Merchant.

    ### Code 936
    - Minimum payment amount must be ? Yen or more. (The minimum payment amount (Yen) set for the entire account or by store has not been met.)
    - Minimum payment amount must be ? Dollar or more. (The minimum payment amount (Dollar) set for the entire account or by store has not been met.)

    ### Code 941
    - This payment has already been refunded. (There is already a canceled transaction.)
    - This payment is being refunded. (There is already a transaction waiting to be canceled.)
    </details>

    ## Support
    Contact: support@pcins.co.kr
  version: 1.0.5
  contact:
    email: support@pcins.co.kr
  license:
    name: Proprietary - PCINS Payment Gateway Co., Ltd.

servers:
  - url: https://pay.pcins.co.kr/gw
    description: Production Environment

tags:
  - name: API Endpoints
    description: List of all PCINS Payment Gateway operations

paths:
  /pay_link.jsp:
    post:
      tags:
        - API Endpoints
      summary: Credit Card Payment & Credit Certification (UI)
      description: |
        Redirects to PCINS payment screen for credit card payment or credit certification.

        ## Flow
        1. Merchant sends form POST to pay_link.jsp
        2. User redirected to PCINS payment page
        3. User enters card info and completes payment/certification
        4. Result sent to callbackURL and returnURL

        ## Return Payment Results (via redirect)
        - **Success Callback:** `callbackURL?merchantId={id}&ref={ref}&payId={payId}&currType={cur}&price={price}&transNo={transNo}&transCode=AS`
        - **Success Return:** `returnURL?transCode=AS&transNo={transNo}&ref={ref}`
        - **Failure Return:** `returnURL?transCode=AF&transNo={transNo}&ref={ref}&errCode={errCode}`

        ## Use tradeGubun=1 for Payment, tradeGubun=7 for Certification
      operationId: creditCardPaymentAndCertificationUI
      x-codeSamples:
        - lang: HTML
          label: HTML Form
          source: |
            <!-- Content-Type: application/x-www-form-urlencoded -->
            <form method="POST" action="https://pay.pcins.co.kr/gw/pay_link.jsp">
              <input type="hidden" name="merchantId" value="M000000187">
              <input type="hidden" name="ref" value="ORD20240122001">
              <input type="hidden" name="tradeGubun" value="1">
              <input type="hidden" name="currType" value="JPY">
              <input type="hidden" name="price" value="2000">
              <input type="hidden" name="payName" value="John Doe">
              <input type="hidden" name="payId" value="customer123">
              <input type="hidden" name="payEmail" value="john@example.com">
              <input type="hidden" name="payTel" value="090-1234-5678">
              <input type="hidden" name="productName" value="Test Product">
              <input type="hidden" name="returnURL" value="https://your-site.com/return">
              <input type="hidden" name="callbackURL" value="https://your-site.com/callback">
              <button type="submit">Pay Now</button>
            </form>
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              oneOf:
                - $ref: "#/components/schemas/CreditCardUIRequest"
                - $ref: "#/components/schemas/CreditCertificationUIRequest"
      responses:
        "200":
          description: |
            Returns HTML form for redirect to payment page.
            If the transaction requires 3D Secure authentication, it returns XML directly.
          content:
            text/html:
              schema:
                type: string
            application/xml:
              schema:
                $ref: "#/components/schemas/TranactionResponse3DS"
              examples:
                credit_card_success:
                  summary: "[Credit Card Payment] 3D Secure Response"
                  value: |
                    <?xml version="1.0" encoding="UTF-8" ?>
                    <TranactionResponse>
                        <ref>ORD20240122001</ref>
                        <transNo>20241129114040</transNo>
                        <resultCode>000</resultCode>
                        <resultMsg>Success</resultMsg>
                        <transTime>20241129114040</transTime>
                        <refererUrl>https://pay.pcins.co.kr/referer...</refererUrl>
                        <checkoutUrl>https://pay.pcins.co.kr/checkout...</checkoutUrl>
                        <approvalNo></approvalNo>
                    </TranactionResponse>
                credit_certification_success:
                  summary: "[Credit Certification] 3D Secure Response"
                  value: |
                    <?xml version="1.0" encoding="UTF-8" ?>
                    <TranactionResponse>
                        <ref>CERT20240122001</ref>
                        <transNo>20241129114055</transNo>
                        <resultCode>000</resultCode>
                        <resultMsg>Success</resultMsg>
                        <transTime>20241129114055</transTime>
                        <refererUrl>https://pay.pcins.co.kr/referer...</refererUrl>
                        <checkoutUrl>https://pay.pcins.co.kr/checkout...</checkoutUrl>
                        <approvalNo></approvalNo>
                    </TranactionResponse>

  /pay_external.jsp:
    post:
      tags:
        - API Endpoints
      summary: External UI Payment (3DS)
      description: |
        External payment page with 3D Secure authentication support.
        This endpoint is required for **VAN36** and **VAN37** 3DS payments.

        ## Return payment results callback
        - **Success Callback:** `callbackURL?merchantId={id}&ref={ref}&payId={payId}&currType={cur}&price={price}&transNo={transNo}&transCode=AS`
        - **Success Return:** `returnURL?transCode=AS&transNo={transNo}&ref={ref}`
        - **Failure Return:** `returnURL?transCode=AF&transNo={transNo}&ref={ref}&errCode={errCode}`
      operationId: externalUIPayment
      x-codeSamples:
        - lang: HTML
          label: HTML Form
          source: |
            <!-- Content-Type: application/x-www-form-urlencoded -->
            <form method="POST" action="https://pay.pcins.co.kr/gw/pay_external.jsp">
              <input type="hidden" name="merchantId" value="M000000187">
              <input type="hidden" name="merchantPwd" value="1234">
              <input type="hidden" name="ref" value="ORD20240122001">
              <input type="hidden" name="tradeGubun" value="1">
              <input type="hidden" name="currType" value="JPY">
              <input type="hidden" name="cardType" value="VIS">
              <input type="hidden" name="price" value="2000">
              <input type="hidden" name="payName" value="John Doe">
              <input type="hidden" name="payId" value="customer123">
              <input type="hidden" name="productName" value="Test Product">
              <input type="hidden" name="payEmail" value="john@example.com">
              <input type="hidden" name="payTel" value="090-1234-5678">
              <input type="hidden" name="callbackURL" value="https://your-site.com/callback">
              <input type="hidden" name="returnURL" value="https://your-site.com/return">
              <button type="submit">Pay with 3DS</button>
            </form>
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              $ref: "#/components/schemas/ExternalUIRequest"
      responses:
        "200":
          description: JavaScript redirect or error response
          content:
            application/xml:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/JavascriptRedirectResponse"
                  - $ref: "#/components/schemas/ErrorResponse"
              examples:
                success:
                  summary: "[External 3DS] JS Redirect Success"
                  value: |
                    <?xml version="1.0" encoding="UTF-8" ?>
                    <script>
                         window.location.href='External UI Payment URL';
                    </script>
                failure:
                  summary: "[Error] Payment Failure"
                  value: |
                    <?xml version="1.0" encoding="UTF-8"?>
                    <ErrorResponse>
                        <responseType>ERROR</responseType>
                        <ref>ORD20240122001</ref>
                        <transNo>2025071002003GG3AK</transNo>
                        <resultCode>935</resultCode>
                        <resultMsg>Acquirer decline.</resultMsg>
                        <approvalNo></approvalNo>
                    </ErrorResponse>

  /pay_direct3ds.jsp:
    post:
      tags:
        - API Endpoints
      summary: Direct 3DS Payment (UI)
      description: |
        Direct 3D Secure payment with card info submitted directly.
        This endpoint is required for **VAN22(PCINS HR)**.

        ## Return payment results callback
        - **Success Callback:** `callbackURL?merchantId={id}&ref={ref}&payId={payId}&currType={cur}&price={price}&transNo={transNo}&transCode=AS`
        - **Success Return:** `returnURL?transCode=AS&transNo={transNo}&ref={ref}`
        - **Failure Return:** `returnURL?transCode=AF&transNo={transNo}&ref={ref}&errCode={errCode}`

        ## City Code Reference (3166-2:JP)
        Use the numeric code for the `cityCode` parameter:
        `1: HOKKAIDO`, `2: AOMORI`, `3: IWATE`, `4: MIYAGI`, `5: AKITA`, `6: YAMAGATA`, `7: FUKUSHIMA`, `8: IBARAKI`, `9: TOCHIGI`, `10: GUNMA`, `11: SAITAMA`, `12: CHIBA`, `13: TOKYO`, `14: KANAGAWA`, `15: NIIGATA`, `16: TOYAMA`, `17: ISHIKAWA`, `18: FUKUI`, `19: YAMANASHI`, `20: NAGANO`, `21: GIFU`, `22: SHIZUOKA`, `23: AICHI`, `24: MIE`, `25: SHIGA`, `26: KYOTO`, `27: OSAKA`, `28: HYOGO`, `29: NARA`, `30: WAKAYAMA`, `31: TOTTORI`, `32: SHIMANE`, `33: OKAYAMA`, `34: HIROSHIMA`, `35: YAMAGUCHI`, `36: TOKUSHIMA`, `37: KAGAWA`, `38: EHIME`, `39: KOCHI`, `40: FUKUOKA`, `41: SAGA`, `42: NAGASAKI`, `43: KUMAMOTO`, `44: OITA`, `45: MIYAZAKI`, `46: KAGOSHIMA`, `47: OKINAWA`
      operationId: direct3DSPayment
      x-codeSamples:
        - lang: HTML
          label: HTML Form
          source: |
            <!-- Content-Type: application/x-www-form-urlencoded -->
            <form method="POST" action="https://pay.pcins.co.kr/gw/pay_direct3ds.jsp">
              <input type="hidden" name="merchantId" value="M000000187">
              <input type="hidden" name="merchantPwd" value="1234">
              <input type="hidden" name="ref" value="ORD20240122001">
              <input type="hidden" name="tradeGubun" value="1">
              <input type="hidden" name="currType" value="JPY">
              <input type="hidden" name="cardType" value="VIS">
              <input type="hidden" name="cardNo" value="4111111111111111">
              <input type="hidden" name="expireM" value="12">
              <input type="hidden" name="expireY" value="25">
              <input type="hidden" name="csc" value="123">
              <input type="hidden" name="price" value="2000">
              <input type="hidden" name="payName" value="John Doe">
              <input type="hidden" name="payId" value="customer123">
              <input type="hidden" name="productName" value="Test Product">
              <input type="hidden" name="payEmail" value="john@example.com">
              <input type="hidden" name="payTel" value="090-1234-5678">
              <input type="hidden" name="address" value="Tokyo Minato-ku">
              <input type="hidden" name="cityCode" value="13">
              <input type="hidden" name="postCode" value="100-0001">
              <input type="hidden" name="callbackURL" value="https://your-site.com/callback">
              <input type="hidden" name="returnURL" value="https://your-site.com/return">
              <button type="submit">Direct 3DS Pay</button>
            </form>
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              $ref: "#/components/schemas/Direct3DSRequest"
      responses:
        "200":
          description: JavaScript redirect or transaction result
          content:
            application/xml:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/JavascriptRedirectResponse"
                  - $ref: "#/components/schemas/Direct3DSNoAuthResponse"
                  - $ref: "#/components/schemas/ErrorResponse"
              examples:
                success:
                  summary: "[With 3DS Auth] Redirect Success"
                  value: |
                    <?xml version="1.0" encoding="UTF-8" ?>
                    <script>
                         window.location.href='Direct 3DS Payment URL';
                    </script>
                success_no_auth:
                  summary: "[Without 3DS Auth] Direct Success"
                  value: |
                    <?xml version="1.0" encoding="UTF-8" ?>
                    <tranactionresponse>
                        <responsetype>SUCCESS</responsetype>
                        <ref>ORD20240122001</ref>
                        <transno>2025112102013C74KO</transno>
                        <transstate>A</transstate>
                        <resultcode>000</resultcode>
                        <resultmsg>success</resultmsg>
                        <transtime>20251121151442</transtime>
                        <externalurl>null</externalurl>
                    </tranactionresponse>
                error_response:
                  summary: "[Error] Payment Failure"
                  value: |
                    <?xml version="1.0" encoding="UTF-8"?>
                    <ErrorResponse>
                        <responseType>ERROR</responseType>
                        <ref>ORD20240122001</ref>
                        <transNo>2025071002003GG3AK</transNo>
                        <resultCode>935</resultCode>
                        <resultMsg>Acquirer decline.</resultMsg>
                        <approvalNo></approvalNo>
                    </ErrorResponse>

  /qr_link.jsp:
    post:
      tags:
        - API Endpoints
      summary: QR Payment (UI)
      description: |
        Generates QR code for Alipay/Wechatpay payment.

        ## Flow
        1. Merchant sends form POST to qr_link.jsp
        2. User redirected to QR payment page
        3. User scans QR code with mobile app
        4. Payment completed and result returned
      operationId: qrPaymentUI
      x-codeSamples:
        - lang: HTML
          label: HTML Form
          source: |
            <!-- Content-Type: application/x-www-form-urlencoded -->
            <form method="POST" action="https://pay.pcins.co.kr/gw/qr_link.jsp">
              <input type="hidden" name="ver" value="100">
              <input type="hidden" name="merchantId" value="M000000187">
              <input type="hidden" name="merchantPwd" value="1234">
              <input type="hidden" name="ref" value="ORD20240122001">
              <input type="hidden" name="tradeGubun" value="1">
              <input type="hidden" name="currType" value="CNY">
              <input type="hidden" name="price" value="2000">
              <input type="hidden" name="payName" value="John Doe">
              <input type="hidden" name="payId" value="customer123">
              <input type="hidden" name="payEmail" value="john@example.com">
              <input type="hidden" name="payTel" value="090-1234-5678">
              <input type="hidden" name="productName" value="Test Product">
              <input type="hidden" name="referURL" value="https://your-site.com/order">
              <input type="hidden" name="returnURL" value="https://your-site.com/return">
              <input type="hidden" name="lang" value="EN">
              <button type="submit">Generate QR</button>
            </form>
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              $ref: "#/components/schemas/QRPaymentUIRequest"
      responses:
        "200":
          description: Returns QR payment page
          content:
            text/html:
              schema:
                type: string

  /pay_request.jsp:
    post:
      tags:
        - API Endpoints
      summary: Credit Card Payment, Speed Payment, Refund & Transaction Inquiry (Non-UI)
      description: |
        Direct API payment processing, speed payment, refunds, and transaction inquiry.
        Use tradeGubun parameter to specify operation:
        - tradeGubun=1: Credit Card Payment
        - tradeGubun=1 with special cardNo (8888...): Speed Payment  
        - tradeGubun=2: Refund
        - tradeGubun=9: Transaction Inquiry
      operationId: directPaymentAPI
      x-codeSamples:
        - lang: cURL
          label: cURL (Credit Card)
          source: |
            curl -X POST https://pay.pcins.co.kr/gw/pay_request.jsp \
              -H "Content-Type: application/x-www-form-urlencoded" \
              -d "ver=100" \
              -d "merchantId=M000000187" \
              -d "merchantPwd=1234" \
              -d "ref=ORD20240122001" \
              -d "tradeGubun=1" \
              -d "cardNo=4111111111111111" \
              -d "expireM=12" \
              -d "expireY=25" \
              -d "csc=123" \
              -d "currType=JPY" \
              -d "price=2000" \
              -d "payName=John Doe" \
              -d "payEmail=john@example.com"
        - lang: JavaScript
          label: Node.js (Fetch)
          source: |
            const params = new URLSearchParams();
            params.append('ver', '100');
            params.append('merchantId', 'M000000187');
            params.append('merchantPwd', '1234');
            params.append('ref', 'ORD20240122001');
            params.append('tradeGubun', '1');
            params.append('cardNo', '4111111111111111');
            params.append('expireM', '12');
            params.append('expireY', '25');
            params.append('csc', '123');
            params.append('currType', 'JPY');
            params.append('price', '2000');
            params.append('payName', 'John Doe');

            fetch('https://pay.pcins.co.kr/gw/pay_request.jsp', {
              method: 'POST',
              headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
              body: params
            })
            .then(res => res.text())
            .then(text => console.log(text))
            .catch(err => console.error(err));
        - lang: HTML
          label: HTML Form (Credit Card)
          source: |
            <!-- Content-Type: application/x-www-form-urlencoded -->
            <form method="POST" action="https://pay.pcins.co.kr/gw/pay_request.jsp">
              <input type="hidden" name="ver" value="100">
              <input type="hidden" name="merchantId" value="M000000187">
              <input type="hidden" name="merchantPwd" value="1234">
              <input type="hidden" name="ref" value="ORD20240122001">
              <input type="hidden" name="tradeGubun" value="1">
              <input type="hidden" name="cardNo" value="4111111111111111">
              <input type="hidden" name="expireM" value="12">
              <input type="hidden" name="expireY" value="25">
              <input type="hidden" name="csc" value="123">
              <input type="hidden" name="currType" value="JPY">
              <input type="hidden" name="price" value="2000">
              <input type="hidden" name="payName" value="John Doe">
              <input type="hidden" name="payId" value="customer123">
              <input type="hidden" name="payEmail" value="john@example.com">
              <input type="hidden" name="payTel" value="090-1234-5678">
              <input type="hidden" name="productName" value="Test Product">
              <input type="hidden" name="returnURL" value="https://your-site.com/return">
              <input type="hidden" name="callbackURL" value="https://your-site.com/callback">
              <button type="submit">Submit Request</button>
            </form>
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              oneOf:
                - $ref: "#/components/schemas/CreditCardNonUIRequest"
                - $ref: "#/components/schemas/SpeedPaymentNonUIRequest"
                - $ref: "#/components/schemas/TransactionInquiryRequest"
                - $ref: "#/components/schemas/RefundRequest"
      responses:
        "200":
          description: XML response with transaction result
          content:
            application/xml:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/TransactionResponse"
                  - $ref: "#/components/schemas/ErrorResponse"
              examples:
                cc_success:
                  summary: "[Credit Card] Payment Success"
                  value: |
                    <?xml version="1.0" encoding="UTF-8" ?>
                    <TransactionResponse>
                        <ref>ORD20240122001</ref>
                        <transNo>20120815000012</transNo>
                        <resultCode>000</resultCode>
                        <resultMsg>Success</resultMsg>
                        <transTime>20120815095629</transTime>
                        <approvalNo>303577</approvalNo>
                    </TransactionResponse>
                speed_success:
                  summary: "[Speed Payment] Payment Success"
                  value: |
                    <?xml version="1.0" encoding="UTF-8" ?>
                    <TransactionResponse>
                        <ref>ORD20240122002</ref>
                        <transNo>20120815000015</transNo>
                        <resultCode>000</resultCode>
                        <resultMsg>Success</resultMsg>
                        <transTime>20120815101010</transTime>
                        <approvalNo>303588</approvalNo>
                    </TransactionResponse>
                refund_success:
                  summary: "[Refund] Refund Success"
                  value: |
                    <?xml version="1.0" encoding="UTF-8" ?>
                    <TransactionResponse>
                        <ref>ORD20240122001</ref>
                        <transNo>20120815000012</transNo>
                        <resultCode>000</resultCode>
                        <resultMsg>Refund Success</resultMsg>
                        <transTime>20120815112233</transTime>
                        <approvalNo>303577</approvalNo>
                    </TransactionResponse>
                inquiry_success:
                  summary: "[Inquiry] Transaction Details"
                  value: |
                    <?xml version="1.0" encoding="UTF-8" ?>
                    <TransactionResponse>
                        <ref>ORD20240122001</ref>
                        <transNo>20120815000012</transNo>
                        <resultCode>000</resultCode>
                        <resultMsg>Success</resultMsg>
                        <transTime>20120815095629</transTime>
                        <transStatus>1</transStatus>
                        <approvalNo>303577</approvalNo>
                    </TransactionResponse>
                general_failure:
                  summary: "[Error] General Failure"
                  value: |
                    <?xml version="1.0" encoding="UTF-8" ?>
                    <TransactionResponse>
                        <ref>ORD20240122001</ref>
                        <transNo>20120815000012</transNo>
                        <resultCode>923</resultCode>
                        <resultMsg>Card number mismatch</resultMsg>
                        <transTime>20120815095629</transTime>
                        <approvalNo></approvalNo>
                    </TransactionResponse>
                validation_error:
                  summary: "[Error] Validation Missing Field"
                  value: |
                    <?xml version="1.0" encoding="UTF-8" ?>
                    <ErrorResponse>
                        <ref></ref>
                        <transNo></transNo>
                        <resultCode>916</resultCode>
                        <resultMsg>Order number was not entered.</resultMsg>
                        <approvalNo></approvalNo>
                    </ErrorResponse>

  /pay_3ds_status_check.jsp:
    post:
      tags:
        - API Endpoints
      summary: Payment Result Notification (Non-UI)
      description: |
        Webhook or API endpoint to receive 3DS payment result notification.
      operationId: paymentResultNotification
      x-codeSamples:
        - lang: cURL
          label: cURL (Webhook Simulation)
          source: |
            curl -X POST https://pay.pcins.co.kr/gw/pay_3ds_status_check.jsp \
              -H "Content-Type: application/x-www-form-urlencoded" \
              -d "ver=100" \
              -d "merchantId=M000000187" \
              -d "merchantPwd=1234" \
              -d "transNo=20241115000012" \
              -d "checkoutId=VAN12345" \
              -d "cardNo=4111111111111111" \
              -d "expireM=00" \
              -d "expireY=00" \
              -d "csc=777" \
              -d "payName=John Doe"
        - lang: HTML
          label: HTML Form (Notification Input)
          source: |
            <!-- Content-Type: application/x-www-form-urlencoded -->
            <form method="POST" action="https://pay.pcins.co.kr/gw/pay_3ds_status_check.jsp">
              <input type="hidden" name="ver" value="100">
              <input type="hidden" name="merchantId" value="M000000187">
              <input type="hidden" name="merchantPwd" value="1234">
              <input type="hidden" name="transNo" value="Transaction Number">
              <input type="hidden" name="checkoutId" value="VAN Transaction ID">
              <input type="hidden" name="cardNo" value="Card number">
              <input type="hidden" name="expireM" value="00">
              <input type="hidden" name="expireY" value="00">
              <input type="hidden" name="csc" value="777">
              <input type="hidden" name="payName" value="Buyer name">
              <button type="submit">Submit Request</button>
            </form>
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              $ref: "#/components/schemas/PaymentNotificationRequest"
      responses:
        "200":
          description: Notification received successfully
          content:
            application/xml:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/TransactionResponse"
                  - $ref: "#/components/schemas/ErrorResponse"
              examples:
                success:
                  summary: "[Success] Response"
                  value: |
                    <?xml version="1.0" encoding="UTF-8" ?> 
                    <TransactionResponse>
                        <transNo>20241115000012</transNo> 
                        <resultCode>000</resultCode> 
                        <resultMsg>Transaction Successed</resultMsg> 
                        <transTime>20241115095629</transTime> 
                        <approvalNo>303577</approvalNo> 
                    </TransactionResponse>
                failure:
                  summary: "[Failure] Missing ID Error"
                  value: |
                    <?xml version="1.0" encoding="UTF-8" ?>
                    <ErrorResponse>
                        <ref></ref>
                        <transNo></transNo>
                        <resultCode>916</resultCode>
                        <resultMsg>加盟店IDを入力してください。</resultMsg>
                        <approvalNo></approvalNo>
                    </ErrorResponse>

components:
  schemas:
    # ======================
    # Request Schemas
    # ======================
    CreditCardUIRequest:
      type: object
      required:
        [
          merchantId,
          ref,
          tradeGubun,
          currType,
          price,
          payEmail,
          payTel,
          productName,
          returnURL,
          callbackURL,
        ]
      properties:
        merchantId: { type: string }
        merchantPwd:
          { type: string, description: "Required for 3DS authentication" }
        ref: { type: string }
        tradeGubun: { type: string, example: "1" }
        currType: { type: string }
        price: { type: number }
        payName: { type: string }
        payId: { type: string }
        payEmail: { type: string }
        payTel: { type: string }
        productName: { type: string }
        returnURL: { type: string }
        callbackURL: { type: string }
        transNo: { type: string }
        errCode: { type: string }
        cardType:
          { type: string, description: "Required for 3DS authentication" }

    CreditCertificationUIRequest:
      type: object
      required:
        [
          merchantId,
          ref,
          tradeGubun,
          currType,
          price,
          payEmail,
          payTel,
          returnURL,
          callbackURL,
        ]
      properties:
        merchantId: { type: string }
        ref: { type: string }
        tradeGubun: { type: string, example: "7" }
        currType: { type: string }
        price: { type: number, example: 0 }
        payId: { type: string }
        payEmail: { type: string }
        payTel: { type: string }
        productName: { type: string }
        returnURL: { type: string }
        callbackURL: { type: string }

    ExternalUIRequest:
      type: object
      required:
        [
          merchantId,
          merchantPwd,
          ref,
          tradeGubun,
          currType,
          cardType,
          price,
          payName,
          payId,
          productName,
          payEmail,
          payTel,
        ]
      properties:
        merchantId: { type: string }
        merchantPwd: { type: string }
        ref: { type: string }
        tradeGubun: { type: string }
        currType: { type: string }
        cardType: { type: string }
        price: { type: number }
        payName: { type: string }
        payId: { type: string }
        productName: { type: string }
        payEmail: { type: string }
        payTel: { type: string }
        callbackURL: { type: string }
        returnURL: { type: string }

    Direct3DSRequest:
      type: object
      required:
        [
          merchantId,
          merchantPwd,
          ref,
          tradeGubun,
          currType,
          cardType,
          cardNo,
          expireM,
          expireY,
          csc,
          price,
          payName,
          payId,
          productName,
          payEmail,
          payTel,
          address,
          cityCode,
          postCode,
        ]
      properties:
        merchantId: { type: string }
        merchantPwd: { type: string }
        ref: { type: string }
        tradeGubun: { type: string }
        currType: { type: string }
        cardType: { type: string }
        cardNo: { type: string }
        expireM: { type: string }
        expireY: { type: string }
        csc: { type: string }
        price: { type: number }
        payName: { type: string }
        payId: { type: string }
        productName: { type: string }
        payEmail: { type: string }
        payTel: { type: string }
        address: { type: string }
        cityCode: { type: string }
        postCode: { type: string }
        callbackURL: { type: string }
        returnURL: { type: string }

    QRPaymentUIRequest:
      type: object
      required:
        [
          merchantId,
          ref,
          tradeGubun,
          currType,
          price,
          payName,
          payId,
          payEmail,
          payTel,
          productName,
          referURL,
          returnURL,
        ]
      properties:
        merchantId: { type: string }
        merchantPwd: { type: string }
        ref: { type: string }
        tradeGubun: { type: string }
        currType: { type: string }
        price: { type: number }
        payName: { type: string }
        payId: { type: string }
        payEmail: { type: string }
        payTel: { type: string }
        productName: { type: string }
        referURL: { type: string }
        returnURL: { type: string }
        lang: { type: string }

    CreditCardNonUIRequest:
      type: object
      required:
        [
          ver,
          merchantId,
          merchantPwd,
          ref,
          tradeGubun,
          cardNo,
          expireM,
          expireY,
          currType,
          price,
          payName,
          payEmail,
          payTel,
        ]
      properties:
        ver: { type: string, example: "100" }
        merchantId: { type: string }
        merchantPwd: { type: string }
        ref: { type: string }
        tradeGubun: { type: string, example: "1" }
        cardNo: { type: string }
        expireM: { type: string }
        expireY: { type: string }
        csc: { type: string }
        currType: { type: string }
        price: { type: number }
        payName: { type: string }
        payId: { type: string }
        payEmail: { type: string }
        payTel: { type: string }
        productName: { type: string }
        returnURL: { type: string }
        callbackURL: { type: string }

    SpeedPaymentNonUIRequest:
      type: object
      required:
        [
          ver,
          merchantId,
          merchantPwd,
          ref,
          tradeGubun,
          cardNo,
          expireM,
          expireY,
          currType,
          price,
          payId,
        ]
      properties:
        ver: { type: string, example: "100" }
        merchantId: { type: string }
        merchantPwd: { type: string }
        ref: { type: string }
        tradeGubun: { type: string, example: "1" }
        cardNo: { type: string, description: "888888888888888X" }
        expireM: { type: string, example: "00" }
        expireY: { type: string, example: "00" }
        currType: { type: string }
        price: { type: number }
        payId: { type: string }
        payEmail: { type: string }
        payTel: { type: string }
        productName: { type: string }

    RefundRequest:
      type: object
      required:
        [
          ver,
          merchantId,
          merchantPwd,
          ref,
          tradeGubun,
          currType,
          price,
          transNo,
        ]
      properties:
        ver: { type: string, example: "100" }
        merchantId: { type: string }
        merchantPwd: { type: string }
        ref: { type: string }
        tradeGubun: { type: string, example: "2" }
        currType: { type: string }
        price: { type: number }
        transNo: { type: string }

    TransactionInquiryRequest:
      type: object
      required: [ver, merchantId, merchantPwd, ref, tradeGubun, currType, price]
      properties:
        ver: { type: string, example: "100" }
        merchantId: { type: string }
        merchantPwd: { type: string }
        ref: { type: string }
        tradeGubun: { type: string, example: "9" }
        currType: { type: string }
        price: { type: number }

    PaymentNotificationRequest:
      type: object
      required:
        [
          ver,
          merchantId,
          merchantPwd,
          transNo,
          checkoutId,
          cardNo,
          expireM,
          expireY,
          csc,
          payName,
        ]
      properties:
        ver: { type: string, example: "100" }
        merchantId: { type: string }
        merchantPwd: { type: string }
        transNo: { type: string }
        checkoutId: { type: string }
        cardNo: { type: string }
        expireM: { type: string }
        expireY: { type: string }
        csc: { type: string }
        payName: { type: string }

    # ======================
    # Response Schemas
    # ======================
    TranactionResponse3DS:
      type: object
      properties:
        ref: { type: string }
        transNo: { type: string }
        resultCode: { type: string }
        resultMsg: { type: string }
        transTime: { type: string }
        refererUrl: { type: string }
        checkoutUrl: { type: string }
        approvalNo: { type: string }

    TransactionResponse:
      type: object
      properties:
        ref: { type: string }
        transNo: { type: string }
        resultCode: { type: string }
        resultMsg: { type: string }
        transTime: { type: string }
        transStatus: { type: string, description: "1=Sale, 2=Refund" }
        approvalNo: { type: string }

    ErrorResponse:
      type: object
      properties:
        responseType: { type: string, example: "ERROR" }
        ref: { type: string }
        transNo: { type: string }
        resultCode: { type: string }
        resultMsg: { type: string }
        approvalNo: { type: string }

    Direct3DSNoAuthResponse:
      type: object
      properties:
        responsetype: { type: string, example: "SUCCESS" }
        ref: { type: string }
        transno: { type: string }
        transstate: { type: string, example: "A" }
        resultcode: { type: string, example: "000" }
        resultmsg: { type: string }
        transtime: { type: string }
        externalurl: { type: string, example: "null" }

    JavascriptRedirectResponse:
      type: string
      description: Returns a script tag containing window.location.href

security: []
